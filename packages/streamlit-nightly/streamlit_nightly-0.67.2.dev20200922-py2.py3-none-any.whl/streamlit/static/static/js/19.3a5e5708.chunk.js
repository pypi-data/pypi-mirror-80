/*! For license information please see 19.3a5e5708.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[19],{1759:function(e,t,a){},1765:function(e,t){},1771:function(e,t){},1773:function(e,t){},1780:function(e,t){},1803:function(e,t){},2393:function(e,t,a){"use strict";a.r(t);var n=a(10),i=a(0),r=a.n(i),o=a(2127),s=a.n(o),c=a(1696),l=a.n(c),h=a(1719),p=a(1128),m=a(2119),u=a(1564),w=a(1559),d=a(2107),g=a(1173),b=a(235),S=a(15),k=a.n(S),f=a(22),v=a(36),x=a(101),E=a.n(x),j=a(146),V=a.n(j),O=a(31);class T extends Error{}class y extends Error{}class C{static get(){var e=this;return Object(f.a)(k.a.mark((function t(){var a,n,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=O.a.current,n=a.commandLine,i=a.userMapboxToken,C.token&&C.commandLine===n.toLowerCase()){t.next=10;break}if(""===i){t.next=6;break}C.token=i,t.next=9;break;case 6:return t.next=8,e.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:C.token=t.sent;case 9:C.commandLine=n.toLowerCase();case 10:return t.abrupt("return",C.token);case 11:case"end":return t.stop()}}),t)})))()}static fetchToken(e,t){return Object(f.a)(k.a.mark((function a(){var n,i;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.a.get(e);case 3:if(n=a.sent,null!=(i=n.data[t])&&""!==i){a.next=7;break}throw new Error('Missing token "'.concat(t,'"'));case 7:return a.abrupt("return",i);case 10:throw a.prev=10,a.t0=a.catch(0),new y("".concat(a.t0.message," (").concat(e,")"));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}C.token=void 0,C.commandLine=void 0,C.isRunningLocal=()=>{const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e};var M=a(229),L=a(126);var F=({error:e,width:t,deltaType:a})=>e instanceof T?r.a.createElement(L.a,{width:t,name:"No Mapbox token provided",message:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"To use ",r.a.createElement("code",null,"st.",a)," or ",r.a.createElement("code",null,"st.map")," you need to set up a Mapbox access token."),r.a.createElement("p",null,"To get a token, create an account at"," ",r.a.createElement("a",{href:"https://mapbox.com"},"https://mapbox.com"),". It's free for moderate usage levels!"),r.a.createElement("p",null,"Once you have a token, just set it using the Streamlit config option ",r.a.createElement("code",null,"mapbox.token")," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."),r.a.createElement("p",null,"See"," ",r.a.createElement("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options"},"our documentation")," ","for more info on how to set config options."))}):e instanceof y?r.a.createElement(L.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"This app requires an internet connection."),r.a.createElement("p",null,"Please check your connection and try again."),r.a.createElement("p",null,"If you think this is a bug, please file bug report"," ",r.a.createElement("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose"},"here"),"."))}):r.a.createElement(L.a,{width:t,name:"Error fetching Streamlit Mapbox token",message:e.message});var N=e=>t=>{class a extends i.PureComponent{constructor(a){var n;super(a),n=this,this.initMapboxToken=Object(f.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get();case 3:t=e.sent,n.setState({mapboxToken:t,isFetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({mapboxTokenError:e.t0,isFetching:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.render=()=>{const a=this.state,n=a.mapboxToken,i=a.mapboxTokenError,o=a.isFetching,s=this.props.width;return i?r.a.createElement(F,{width:s,error:i,deltaType:e}):o?r.a.createElement(M.a,{element:Object(v.g)("Loading...").get("alert"),width:s}):r.a.createElement(t,Object.assign({mapboxToken:n},this.props))},this.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},this.initMapboxToken()}}return a.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),E()(a,t)};a(1758),a(1759);const D={classes:Object(n.a)(Object(n.a)(Object(n.a)({},p),w),u)};Object(g.registerLoaders)([d.CSVLoader]);const J=new m.JSONConverter({configuration:D});class P extends i.PureComponent{constructor(...e){super(...e),this.state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},this.componentDidMount=()=>{this.setState({initialized:!0})},this.createTooltip=e=>{let t=this.props.element.get("tooltip");return!!(e&&e.object&&t)&&(t=JSON.parse(t),t.html?t.html=this.interpolate(e,t.html):t.text=this.interpolate(e,t.text),t)},this.interpolate=(e,t)=>{const a=t.match(/{(.*?)}/g);return a&&a.forEach(a=>{const n=a.substring(1,a.length-1);e.object.hasOwnProperty(n)&&(t=t.replace(a,e.object[n]))}),t},this.onViewStateChange=({viewState:e})=>{this.setState({viewState:e})}}static getDerivedStateFromProps(e,t){const a=P.getDeckObject(e);if(!l()(a.initialViewState,t.initialViewState)){const e=Object.keys(a.initialViewState).reduce((e,i)=>a.initialViewState[i]===t.initialViewState[i]?e:Object(n.a)(Object(n.a)({},e),{},{[i]:a.initialViewState[i]}),{});return{viewState:Object(n.a)(Object(n.a)({},t.viewState),e),initialViewState:a.initialViewState}}return null}render(){const e=P.getDeckObject(this.props),t=this.state.viewState;return r.a.createElement("div",{className:"stDeckGlJsonChart",style:{height:e.initialViewState.height,width:e.initialViewState.width}},r.a.createElement(s.a,{viewState:t,onViewStateChange:this.onViewStateChange,height:e.initialViewState.height,width:e.initialViewState.width,layers:this.state.initialized?e.layers:[],getTooltip:this.createTooltip,controller:!0},r.a.createElement(h.StaticMap,{height:e.initialViewState.height,width:e.initialViewState.width,mapStyle:e.mapStyle&&("string"===typeof e.mapStyle?e.mapStyle:e.mapStyle[0]),mapboxApiAccessToken:this.props.mapboxToken})))}}P.getDeckObject=e=>{const t=e.element,a=e.width,n=e.height,i=t.get("useContainerWidth"),r=JSON.parse(t.get("json"));return n?(r.initialViewState.height=n,r.initialViewState.width=a):(r.initialViewState.height||(r.initialViewState.height=500),i&&(r.initialViewState.width=a)),delete r.views,J.convert(r)};var z=N("st.pydeck_chart")(Object(b.a)(P));a.d(t,"default",(function(){return z}))}}]);
//# sourceMappingURL=19.3a5e5708.chunk.js.map
(this.webpackJsonptravis=this.webpackJsonptravis||[]).push([[0],{127:function(e,t,n){e.exports=n(239)},132:function(e,t,n){},133:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(33),c=n.n(o),s=(n(132),n(10)),i=n(53),l=(n(133),n(70)),u=n(31),h=n.n(u),m=n(81),d=n(54),f=n(79),b=n(111),p=n(2),g=n(55),O=n(72),v=n(112),y=n(113),E=n.n(y),j=Object(l.fitWidth)((function(e){var t=e.type,n=e.width,a=e.data,o=e.ratio,c=e.chartType,l=(e.indicator,e.transactions),u=function(e,t,n){switch(e){case"m5":return n.isSameOrAfter(t,"minutes")&&n.isBefore(t.add(5,"minutes"),"minutes");case"m15":return n.isSameOrAfter(t,"minutes")&&n.isBefore(t.add(15,"minutes"),"minutes");case"h1":return n.isSameOrAfter(t,"hours")&&n.isBefore(t.add(1,"hours"),"hours");case"h4":return n.isSameOrAfter(t,"hours")&&n.isBefore(t.add(4,"hours"),"hours");default:return t.isSame(n,"hours")}},y=Object(O.sma)().id(0).options({windowSize:20}).merge((function(e,t){e.sma20=t})).accessor((function(e){return e.sma20})),j=Object(O.sma)().options({windowSize:50}).merge((function(e,t){e.sma50=t})).accessor((function(e){return e.sma50})).stroke("blue"),w=E()().windowSize(2).accumulator((function(e){for(var t=Object(i.a)(e,2),n=(t[0],t[1].date),a=0;a<l.length;a++){var r=l[a];if(u(c,h()(n),h()(r.date))){if(r.amount>0)return"LONG";if(r.amount<0)return"SHORT"}}})).merge((function(e,t){e.longShort=t})),k={fontFamily:"Glyphicons Halflings",fontSize:20,opacity:.8,onClick:console.log.bind(console)},S=Object(s.a)(Object(s.a)({},k),{},{fill:"#006517",text:"\ue093",y:function(e){return(0,e.yScale)(e.datum.low)+20},tooltip:"Go long"}),A=Object(s.a)(Object(s.a)({},k),{},{fill:"#E20000",text:"\ue094",y:function(e){return(0,e.yScale)(e.datum.high)},tooltip:"Go short"}),x=w(y(j(a))),C=v.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return e.date}))(x),T=C.data,L=C.xScale,M=C.xAccessor,B=C.displayXAccessor;console.log("render: ",a,T,y.accessor(),y.stroke());var N=[M(Object(p.last)(T)),M(T[Math.max(0,T.length-150)])];return r.a.createElement(m.b,{height:400,ratio:o,width:n,margin:{left:50,right:50,top:10,bottom:30},type:t,seriesName:"MSFT",data:T,xAccessor:M,displayXAccessor:B,xScale:L,xExtents:N},r.a.createElement(m.a,{id:1,yExtents:[function(e){return[e.high,e.low]},y.accessor()]},r.a.createElement(f.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),r.a.createElement(f.YAxis,{axisAt:"left",orient:"left",ticks:5}),r.a.createElement(d.CandlestickSeries,null),r.a.createElement(d.LineSeries,{yAccessor:y.accessor(),stroke:y.stroke()}),r.a.createElement(d.LineSeries,{yAccessor:j.accessor(),stroke:j.stroke()}),r.a.createElement(b.CurrentCoordinate,{yAccessor:y.accessor(),fill:y.stroke()}),r.a.createElement(g.Annotate,{with:g.LabelAnnotation,when:function(e){return"LONG"===e.longShort},usingProps:S}),r.a.createElement(g.Annotate,{with:g.LabelAnnotation,when:function(e){return"SHORT"===e.longShort},usingProps:A})))})),w=n(240),k=n(259),S=n(260),A=n(56),x=n(73),C=(n(261),function(){function e(){Object(A.a)(this,e),this.chart=void 0,this.transactions=void 0,this.chart={m1:[],m5:[],m15:[],m30:[],h1:[],h4:[],d1:[],w1:[]},this.transactions=[]}return Object(x.a)(e,[{key:"setChart",value:function(e,t){try{var n=[];switch(e.forEach((function(e){n.push({date:h()(e.date).toDate(),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume})})),t){case"m1":this.chart.m1=n;break;case"m5":this.chart.m5=n;break;case"m15":this.chart.m15=n;break;case"h1":this.chart.h1=n;break;case"h4":this.chart.h4=n;break;case"d1":this.chart.d1=n;break;case"w1":this.chart.w1=n}console.log("finish set chart",n,t)}catch(a){console.log("setChart Error",a)}}},{key:"setTransaction",value:function(e){try{var t=[];e.forEach((function(e){t.push({id:e.id,date:h()(e.date).toDate(),amount:e.amount,price:e.price,value:e.value,symbol:e.symbol})})),this.transactions=t}catch(n){console.log("setTransaction Error",n)}}}]),e}()),T=function e(){Object(A.a)(this,e),this.sma=void 0,this.sma=[]},L=n(80),M=n.n(L),B=n(114),N=n(115),G=n.n(N),H=function(e){var t=new C;console.log(e);var n=e.chart,a=e.transactions;return["m1","m5","m15","h1","h4","d1"].forEach((function(e){0!==n[e].length&&(console.log(e,JSON.parse(n[e])),t.setChart(JSON.parse(n[e]),e))})),0!==a.length&&t.setTransaction(JSON.parse(a)),t},J=function(){var e=Object(B.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("tes2"),e.next=3,G()({url:"/data",method:"get",baseURL:"http://localhost:8000"});case 3:return t=e.sent,console.log("tes",t),n=H(t.data),console.log("chart: ",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=n(116),D=function(){var e,t=Object(a.useState)({type:"h1"}),n=Object(i.a)(t,2),o=n[0],c=n[1],u=Object(z.useAsync)(J,[]);return Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){console.log("recieve message")}),[]),console.log("status: ",u),u.loading?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,u.loading&&r.a.createElement("div",null,"Loading"),u.error&&r.a.createElement("div",null,"Error: ",u.error.message),u.result&&r.a.createElement("div",null,r.a.createElement(k.a,{color:"primary","aria-label":"outlined primary button group"},Object.entries(null===u||void 0===u||null===(e=u.result)||void 0===e?void 0:e.chart).map((function(e){var t=Object(i.a)(e,2),n=t[0];if(0!==t[1].length)switch(n){case"m1":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"m1"}))}},"5M");case"m5":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"m5"}))}},"5M");case"m15":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"m15"}))}},"15M");case"m15":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"m30"}))}},"30M");case"h1":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"h1"}))}},"1H");case"h4":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"h4"}))}},"4H");case"d1":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"d1"}))}},"1D");case"w1":return r.a.createElement(w.a,{onClick:function(){return c(Object(s.a)(Object(s.a)({},o),{},{type:"w1"}))}},"1W")}}))),r.a.createElement(S.a,null,"chartType: "+o.type),r.a.createElement(l.TypeChooser,null,(function(e){var t,n;return r.a.createElement(j,{type:e,data:null===(t=u.result)||void 0===t?void 0:t.chart[o.type],chartType:o.type,indicator:new T,transactions:null===(n=u.result)||void 0===n?void 0:n.transactions})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.2e705693.chunk.js.map
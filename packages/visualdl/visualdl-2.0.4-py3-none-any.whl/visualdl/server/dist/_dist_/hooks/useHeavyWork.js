const b={};import g from"../../__snowpack__/env.js";b.env=g;import{useCallback as h,useEffect as p,useRef as y,useState as m}from"../../web_modules/react.js";const x=(l,s,d,e)=>{const u=y(null),n=y(null),[E,v]=m(void 0),o=h(t=>d&&v(d(t)),[d]);return p(()=>{try{if(l&&typeof WebAssembly!="undefined"){var t;u.current||(u.current=l()),(t=u.current)===null||t===void 0||t.then(i=>v(i(e))).catch(()=>o(e));return}if(s&&typeof Worker!="undefined"){var f,r,c;n.current||(n.current=s()),(f=n.current)===null||f===void 0||f.postMessage(e),(r=n.current)===null||r===void 0||r.addEventListener("message",({data:i})=>v(i)),(c=n.current)===null||c===void 0||c.addEventListener("error",()=>o(e));return}}catch(i){b.env.MODE==="development"&&(console.error("Error during heavy work, trying to use fallback"),console.error(i)),o(e)}o(e)},[l,s,o,e]),E};export default x;

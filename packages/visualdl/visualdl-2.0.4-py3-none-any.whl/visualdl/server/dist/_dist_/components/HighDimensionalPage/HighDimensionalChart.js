import l,{useMemo as h}from"../../../web_modules/react.js";import{contentHeight as p,primaryColor as j,rem as C}from"../../utils/style.js";import k from"../ScatterChart.js";import{divide as E}from"../../resource/high-dimensional/index.js";import R from"../../../web_modules/query-string.js";import v from"../../../web_modules/styled-components.js";import S from"../../hooks/useHeavyWork.js";import{useRunningRequest as q}from"../../hooks/useRequest.js";import{useTranslation as H}from"../../../web_modules/react-i18next.js";import $ from"../../utils/wasm.js";const W=()=>$("high_dimensional_divide").then(t=>i=>{var s;return t(i.points,i.labels,!!i.visibility,(s=i.keyword)!==null&&s!==void 0?s:"")}),x=v(k).withConfig({displayName:"HighDimensionalChart__StyledScatterChart",componentId:"sc-179pidq-0"})(["height:",";"],p),_=v.div.withConfig({displayName:"HighDimensionalChart__Empty",componentId:"sc-179pidq-1"})(["display:flex;justify-content:center;align-items:center;font-size:",";height:",";"],C(20),p),g={show:!0,position:"top",formatter:t=>t.data.showing?t.data.name:""},D=({run:t,tag:i,running:s,labelVisibility:d,keyword:a,reduction:y,dimension:m})=>{const{t:u}=H("common"),{data:e,error:f,loading:c}=q(t&&i?`/embedding/embedding?${R.stringify({run:t,tag:i,dimension:Number.parseInt(m,10),reduction:y})}`:null,!!s),b=h(()=>{var n,r;return{points:(n=e==null?void 0:e.embedding)!==null&&n!==void 0?n:[],keyword:a,labels:(r=e==null?void 0:e.labels)!==null&&r!==void 0?r:[],visibility:d}},[e,d,a]),o=S(W,null,E,b),w=h(()=>{var n,r;return[{name:"highlighted",data:(n=o==null?void 0:o[0])!==null&&n!==void 0?n:[],label:g},{name:"others",data:(r=o==null?void 0:o[1])!==null&&r!==void 0?r:[],label:g,color:j}]},[o]);return!e&&f?l.createElement(_,null,u("common:error")):!e&&!c?l.createElement(_,null,u("common:empty")):l.createElement(x,{loading:c,data:w,gl:m==="3d"})};export default D;

let j=t=>t,k;import e,{useCallback as f,useEffect as h,useState as g}from"../../../web_modules/react.js";import{css as x,ellipsis as F,em as o,rem as E,sameBorder as v,size as z,transitionProps as y,triangle as L}from"../../utils/style.js";import T from"../Field.js";import V from"../SearchInput.js";import c from"../../../web_modules/styled-components.js";import W from"../../hooks/useSearchValue.js";import{useTranslation as X}from"../../../web_modules/react-i18next.js";const B=c(T).withConfig({displayName:"Search__SearchField",componentId:"sc-14cp3it-0"})(["margin-bottom:",";display:flex;justify-content:space-between;align-items:center;>:first-child{flex:auto;}> a:last-child{color:var(--primary-color);cursor:pointer;margin-left:",";flex:none;","}"],E(20),E(10),y("color")),$=c.div.withConfig({displayName:"Search__Empty",componentId:"sc-14cp3it-1"})(["padding:"," 0;text-align:center;color:var(--text-light-color);",""],E(100),y("color")),q=c.div.withConfig({displayName:"Search__Wrapper",componentId:"sc-14cp3it-2"})(["overflow:auto;"]),G=c.ul.withConfig({displayName:"Search__List",componentId:"sc-14cp3it-3"})(["list-style:none;margin:0;padding:0;"]),H=c.li.withConfig({displayName:"Search__Item",componentId:"sc-14cp3it-4"})(["padding:"," ",";cursor:pointer;width:100%;background-color:var(--background-color);display:flex;align-items:center;"," > span{flex:auto;margin-left:",";","}&:hover{background-color:var(--background-focused-color);}"],o(10),o(12),y("background-color"),o(10),F()),b=x(k||(k=j`
    color: #979797;
    flex: none;
    width: ${0};
`),o(8)),R=c.i.withConfig({displayName:"Search__EdgeIcon",componentId:"sc-14cp3it-5"})([""," position:relative;height:",";overflow:hidden;&::before{content:'';display:block;"," background-color:currentColor;position:absolute;top:0;left:50%;transform:translateX(-50%);}&::after{content:'';display:block;"," position:absolute;top:",";left:50%;transform:translateX(-50%);}"],b,o(11),z(o(6),o(1)),L({pointingDirection:"bottom",height:o(5),width:o(7),foregroundColor:"currentColor"}),o(6)),J=c.i.withConfig({displayName:"Search__NodeIcon",componentId:"sc-14cp3it-6"})([""," height:",";"," background-color:#f7f7f7;"],b,o(7),v({radius:o(2),color:"currentColor"})),K=c.i.withConfig({displayName:"Search__InitializerIcon",componentId:"sc-14cp3it-7"})([""," height:",";"," background-color:#f7f7f7;"],b,o(8),v({radius:o(4),color:"currentColor"})),M={input:R,output:R,node:J,initializer:K},O=({text:t,data:i,onChange:r,onSelect:s,onActive:a,onDeactive:l})=>{const{t:u}=X(["graph","common"]),[d,m]=g(t!=null?t:""),[p,_]=g(!1),[I,w]=g(i.result),S=W(d);h(()=>m(t!=null?t:""),[t]),h(()=>{p?r==null||r(S):w([])},[S,p,r]),h(()=>{i.text===d&&w(i.result)},[i,d]);const P=f(()=>{_(!0),a==null||a()},[a]),C=f(()=>{m(""),r==null||r(""),_(!1),l==null||l()},[r,l]),N=f(n=>{m(n.name),s==null||s(n),_(!1),l==null||l()},[s,l]);return e.createElement(e.Fragment,null,e.createElement(B,null,e.createElement(V,{placeholder:u("common:search"),value:d,onChange:m,onFocus:P}),p&&e.createElement("a",{onClick:C},u("common:cancel"))),p&&(I.length?e.createElement(q,null,e.createElement(G,null,I.map(n=>{const U=M[n.type];return e.createElement(H,{key:n.id,onClick:()=>N(n),title:n.name},e.createElement(U,null),e.createElement("span",null,n.name))}))):e.createElement($,null,u("graph:nothing-matched"))))};export default O;

let A=o=>o,S;import i,{useCallback as p,useEffect as T,useMemo as g,useState as j}from"../../web_modules/react.js";import{borderRadius as M,borderRadiusShortHand as R,css as z,ellipsis as $,em as f,math as B,sameBorder as W,size as k,transitionProps as _}from"../utils/style.js";import F from"./Checkbox.js";import H from"./Icon.js";import d from"../../web_modules/styled-components.js";import D from"../hooks/useClickOutside.js";import{useTranslation as G}from"../../web_modules/react-i18next.js";import J from"../../web_modules/lodash/without.js";export const padding=f(10),height=f(36);const K=d.div.withConfig({displayName:"Select__Wrapper",componentId:"sc-1rc4rcq-0"})(["height:",";line-height:calc("," - 2px);max-width:100%;display:inline-block;position:relative;background-color:var(--background-color);"," "," "," &:hover{border-color:var(--border-focused-color);}"],height,height,W({radius:!0}),o=>o.opened?R("bottom","0"):"",_("border-color","background-color")),Q=d.div.withConfig({displayName:"Select__Trigger",componentId:"sc-1rc4rcq-1"})(["padding:",";display:inline-flex;"," justify-content:space-between;align-items:center;cursor:pointer;"," ",""],padding,k("100%"),o=>o.selected?"":"color: var(--text-lighter-color)",_("color")),X=d(H).withConfig({displayName:"Select__TriggerIcon",componentId:"sc-1rc4rcq-2"})([""," text-align:center;display:block;flex-shrink:0;transform:rotate(","deg) scale(",");",""],k(f(14)),o=>o.opened?"180":"0",10/14,_("transform")),Y=d.span.withConfig({displayName:"Select__Label",componentId:"sc-1rc4rcq-3"})(["flex-grow:1;padding-right:",";",""],f(10),$()),Z=d.div.withConfig({displayName:"Select__List",componentId:"sc-1rc4rcq-4"})(["position:absolute;top:100%;width:calc(100% + 2px);max-height:",";overflow-x:hidden;overflow-y:auto;left:-1px;padding:"," 0;border:inherit;border-top-color:var(--border-color);"," display:",";z-index:9999;line-height:1;background-color:inherit;box-shadow:0 5px 6px 0 rgba(0,0,0,0.05);"," ",""],B(`4.35 * ${height} + 2 * ${padding}`),padding,R("bottom",M),o=>o.opened?"block":"none",_(["border-color","color"]),o=>o.empty?{color:"var(--text-lighter-color)",textAlign:"center"}:""),C=z(S||(S=A`
    display: block;
    cursor: pointer;
    padding: 0 ${0};
    ${0}
    line-height: ${0};
    ${0}

    &:hover {
        background-color: var(--background-focused-color);
    }
`),padding,k(height,"100%"),height,_(["color","background-color"])),V=d.div.withConfig({displayName:"Select__ListItem",componentId:"sc-1rc4rcq-5"})([""," "," ",""],$(),C,o=>o.selected?"color: var(--select-selected-text-color);":""),ee=d(F).withConfig({displayName:"Select__MultipleListItem",componentId:"sc-1rc4rcq-6"})([""," display:flex;align-items:center;"],C),oe=({list:o,value:s,placeholder:w,multiple:c,className:L,onChange:n})=>{const{t:v}=G("common"),[a,I]=j(!1),N=p(()=>I(!a),[a]),h=p(()=>I(!1),[]),[l,u]=j(c?Array.isArray(s)?s:[]:s);T(()=>u(c?Array.isArray(s)?s:[]:s),[c,s,u]);const b=g(()=>!!(c?l&&l.length!==0:l),[c,l]),P=p(e=>{u(e),n==null||n(e),h()},[h,n]),q=p((e,r)=>{let t=l;r?t.includes(e)||(t=[...t,e]):t.includes(e)&&(t=J(t,e)),u(t),n==null||n(t)},[l,n]),U=D(h),m=g(()=>{var e;return(e=o==null?void 0:o.map(r=>["string","number"].includes(typeof r)?{value:r,label:r+""}:r))!==null&&e!==void 0?e:[]},[o]),E=g(()=>m.length===0,[m]),y=p(e=>{var r,t;return(r=(t=m.find(O=>O.value===e))===null||t===void 0?void 0:t.label)!==null&&r!==void 0?r:""},[m]),x=g(()=>b?c?l.map(y).join(" / "):y(l):w||v("common:select"),[c,l,y,b,w,v]);return i.createElement(K,{ref:U,opened:a,className:L},i.createElement(Q,{onClick:N,selected:b,title:b&&x?String(x):""},i.createElement(Y,null,x),i.createElement(X,{opened:a,type:"chevron-down"})),i.createElement(Z,{opened:a,empty:E},E?v("common:empty"):m.map((e,r)=>c?i.createElement(ee,{value:l.includes(e.value),key:r,title:e.label,size:"small",onChange:t=>q(e.value,t)},e.label):i.createElement(V,{selected:e.value===l,key:r,title:e.label,onClick:()=>P(e.value)},e.label))))};export default oe;

import U,{AsideSection as p}from"./Aside.js";import t,{useCallback as u,useMemo as s,useState as j}from"../../web_modules/react.js";import{ellipsis as A,em as n,rem as _,size as S}from"../utils/style.js";import b from"./Checkbox.js";import k from"./Field.js";import N from"./RunningToggle.js";import q from"./SearchInput.js";import I from"../../web_modules/styled-components.js";import T from"../../web_modules/lodash/uniqBy.js";import{useTranslation as B}from"../../web_modules/react-i18next.js";const F=I(U).withConfig({displayName:"RunAside__StyledAside",componentId:"sc-1k1mq1t-0"})(["",".run-section{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;margin-bottom:0;.run-select{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;> *{flex:none;}.search-input{margin-bottom:",";}.run-list{flex:auto;overflow-x:hidden;overflow-y:auto;margin-top:",";> div{margin-top:",";> *{width:100%;}.run-item{display:flex;align-items:center;"," > i{display:inline-block;",";border-radius:",";margin-right:",";}}}}}}"],p,_(15),_(5),_(11),A(),S(n(12),n(12)),n(6),n(8)),z=({runs:l,selectedRuns:o,onChangeRuns:a,running:f,onToggleRunning:v,children:E})=>{const{t:d}=B("common"),[c,g]=j(""),x=s(()=>(l==null?void 0:l.length)===(o==null?void 0:o.length),[l,o]),y=u(e=>{a==null||a(e?l!=null?l:[]:[])},[a,l]),h=s(()=>{var e;return(e=c?l==null?void 0:l.filter(r=>r.label.indexOf(c)>=0):l)!==null&&e!==void 0?e:[]},[l,c]),w=u((e,r)=>{let i=o!=null?o:[];r?i=T([...i,e],m=>m.label):i=i.filter(m=>m.label!==e.label),a==null||a(i)},[a,o]),P=s(()=>t.createElement(N,{className:"running-toggle",running:f,onToggle:v}),[f,v]);return t.createElement(F,{bottom:P},E,t.createElement(p,{className:"run-section"},t.createElement(k,{className:"run-select",label:d("common:select-runs")},t.createElement(q,{className:"search-input",value:c,onChange:g,placeholder:d("common:search-runs"),rounded:!0}),t.createElement(b,{value:x,onChange:y},d("common:select-all")),t.createElement("div",{className:"run-list"},h.map((e,r)=>{var i;return t.createElement("div",{key:r},t.createElement(b,{value:o==null||((i=o.map(m=>m.label))===null||i===void 0)?void 0:i.includes(e.label),title:e.label,onChange:m=>w(e,m)},t.createElement("span",{className:"run-item"},t.createElement("i",{style:{backgroundColor:e.colors[0]}}),e.label)))})))))};export default z;

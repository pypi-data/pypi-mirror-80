function P(e,i){if(e==null)return{};var t=A(e,i),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){if(o=a[r],i.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;t[o]=e[o]}}return t}function A(e,i){if(e==null)return{};var t={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++){if(r=o[a],i.indexOf(r)>=0)continue;t[r]=e[r]}return t}import*as h from"../utils/chart.js";import u,{useEffect as L,useImperativeHandle as R}from"../../web_modules/react.js";import{primaryColor as C}from"../utils/style.js";import U,{Wrapper as k,useChartTheme as I}from"../hooks/useECharts.js";import S from"../../web_modules/react-spinners/GridLoader.js";import m from"../../web_modules/lodash/defaultsDeep.js";import{formatTime as g}from"../utils/index.js";import{useTranslation as T}from"../../web_modules/react-i18next.js";export let XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export let YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const N=u.forwardRef(({options:e,data:i,title:t,loading:o,zoom:r,className:a,onInit:y},b)=>{const{i18n:c}=T(),{ref:x,echart:l,wrapper:j,saveAsImage:E}=U({loading:!!o,zoom:r,autoFit:!0,onInit:y}),_=I();return R(b,()=>({restore:()=>{l==null||l.dispatchAction({type:"restore"})},saveAsImage:()=>{E(t)}})),L(()=>{var f,p;const{color:W,colorAlt:$,series:O}=h,w=P(h,["color","colorAlt","series"]);let s=m({title:{text:t!=null?t:""},series:i==null?void 0:i.map(n=>{var d,v;return m({showSymbol:((d=n==null||((v=n.data)===null||v===void 0)?void 0:v.length)!==null&&d!==void 0?d:0)<=1,type:"line"},n,O)})},e,_,w);((f=s)===null||f===void 0?void 0:f.xAxis).type==="time"&&(s=m({xAxis:{axisLabel:{formatter:n=>g(n,c.language,"LTS")}}},s)),((p=s)===null||p===void 0?void 0:p.yAxis).type==="time"&&(s=m({yAxis:{axisLabel:{formatter:n=>g(n,c.language,"LTS")}}},s)),l==null||l.setOption(s,{notMerge:!0})},[e,i,t,_,c.language,l]),u.createElement(k,{ref:j,className:a},!l&&u.createElement("div",{className:"loading"},u.createElement(S,{color:C,size:"10px"})),u.createElement("div",{className:"echarts",ref:x}))});export default N;

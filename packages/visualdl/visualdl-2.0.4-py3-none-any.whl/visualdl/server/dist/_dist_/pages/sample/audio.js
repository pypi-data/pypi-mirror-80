import g from"../../components/ChartPage.js";import e,{useCallback as p,useEffect as h,useMemo as C,useRef as R,useState as E}from"../../../web_modules/react.js";import f from"../../components/SamplePage/AudioChart.js";import w from"../../components/Content.js";import j from"../../components/Error.js";import P from"../../components/RunAside.js";import x from"../../components/Title.js";import{rem as A}from"../../utils/style.js";import U from"../../hooks/useTagFilter.js";import{useTranslation as S}from"../../../web_modules/react-i18next.js";const T={height:A(244)},b=()=>{const{t:u}=S(["sample","common"]),r=R();h(()=>{const i=window.AudioContext||window.webkitAudioContext;return r.current=new i,()=>{var n;(n=r.current)===null||n===void 0||n.close()}},[]);const[t,l]=E(!0),{runs:o,tagsWithSingleRun:c,selectedRuns:a,onChangeRuns:m,loading:s}=U("audio",t),_=C(()=>o.length?e.createElement(P,{runs:o,selectedRuns:a,onChangeRuns:m,running:t,onToggleRunning:l}):null,[m,t,o,a]),d=p(({run:i,label:n})=>e.createElement(f,{audioContext:r.current,run:i,tag:n,running:t}),[t]);return e.createElement(e.Fragment,null,e.createElement(x,null,u("common:sample")," - ",u("common:audio")),e.createElement(w,{aside:_,loading:s},!s&&!o.length?e.createElement(j,null):e.createElement(g,{items:c,chartSize:T,withChart:d,loading:s})))};export default b;

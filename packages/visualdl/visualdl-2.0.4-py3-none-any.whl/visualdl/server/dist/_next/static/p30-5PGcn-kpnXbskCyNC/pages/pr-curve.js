(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{DLPD:function(e,t,n){"use strict";var r=n("ERkP"),a=n.n(r),o=n("s+3g"),i=n("jd94"),l=n("J/v5"),c=n("9bu8"),u=a.a.createElement,s=[l.a.Step,l.a.Relative,l.a.WallTime];t.a=function(e){var t=e.value,n=e.onChange,a=Object(c.g)("common").t,l=Object(r.useState)(t),p=l[0],b=l[1];Object(r.useEffect)((function(){return b(t)}),[t]);var d=Object(r.useCallback)((function(e){b(e),null===n||void 0===n||n(e)}),[n]);return u(i.c,{value:p,onChange:d},s.map((function(e){return u(o.a,{key:e,value:e},a("common:time-mode.".concat(e)))})))}},"J/v5":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Step="step",e.Relative="relative",e.WallTime="wall"}(r||(r={}))},LSJS:function(e,t,n){"use strict";n.r(t);var r=n("cxan"),a=n("HbGN"),o=n("zjfJ"),i=n("s8Q3"),l=n("9bu8"),c=n("ERkP"),u=n.n(c),s=n("J/v5"),p={legend:{data:[]},tooltip:{position:["10%","100%"]},yAxis:{splitNumber:5}},b=n("r8eb"),d=n("0jAH"),f=n("QRo2"),m=n("E67T"),v=n("wK9i"),g=n("zygG"),O=n("fGyu"),j=n("Umn3"),h=n("5x5+"),y=n("HO86"),w=n("kQdG");var C=n("wje0"),S=n("Ns5m"),x=n("iU75"),k=n("Uqjl"),P=n("90Fk"),_=n("EjHT"),E=n("JBtm"),N=n.n(E),T=n("Q/r/"),R=n("j/s1"),I=n("O1Fn"),H=n("xrec"),z=n.n(H),D=u.a.createElement;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J,L,W=Object(_.a)(".4f"),U=Object(_.a)(".2f"),K=R.c.div.withConfig({displayName:"PRCurveChart__Wrapper",componentId:"sc-51l18-0"})([""," display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;"],Object(b.K)("100%","100%")),F=Object(R.c)(C.c).withConfig({displayName:"PRCurveChart__StyledLineChart",componentId:"sc-51l18-1"})(["flex-grow:1;"]),q=Object(R.c)(S.a).withConfig({displayName:"PRCurveChart__Toolbox",componentId:"sc-51l18-2"})(["margin-left:",";margin-right:",";margin-bottom:",";"],Object(b.H)(20),Object(b.H)(20),Object(b.H)(18)),G=R.c.div.withConfig({displayName:"PRCurveChart__Error",componentId:"sc-51l18-3"})([""," display:flex;justify-content:center;align-items:center;"],Object(b.K)("100%","100%")),Q=function(e){var t=e.cid,n=e.runs,r=e.tag,a=e.running,o=Object(l.g)(["pr-curve","common"]).t,i=Object(c.useRef)(null),u=Object(I.b)(n.map((function(e){return"/pr-curve/list?".concat(N.a.stringify({run:e.label,tag:r}))})),!!a,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.b)(t)})),s=u.data,b=u.error,d=u.loading,f=Object(c.useState)(!1),m=f[0],v=f[1],C=Object(c.useCallback)((function(){P.a.emit("toggle-chart-size",t,!m),v((function(e){return!e}))}),[t,m]),S=Object(c.useMemo)((function(){return n.map((function(e,t){var n,r,a,o=null!==(n=null===s||void 0===s?void 0:null===(r=s[t])||void 0===r?void 0:r.find((function(t){return t[1]===e.steps[e.index]})))&&void 0!==n?n:[0,0,[],[],[],[],[],[],[]],i=(a=o,Object(j.a)(a)||Object(h.a)(a)||Object(y.a)(a)||Object(w.a)()),l=i[0],c=i[1],u=i.slice(2);return[l,c,z.a.apply(void 0,Object(O.a)(u))]}))}),[s,n]),_=Object(c.useMemo)((function(){return S.map((function(e,t){var r=n[t];return{name:r.label,z:t,itemStyle:{color:r.colors[0]},lineStyle:{color:r.colors[0]},data:e[2],encode:{x:[1],y:[0]}}}))}),[S,n]),E=Object(c.useCallback)((function(e){var t=Array.isArray(e)?e[0].data:e.data,r=function(e,t){return e.map((function(e){for(var n=Number.POSITIVE_INFINITY,r=0,a=0;a<e.length;a++){var o=Math.abs(e[a][1]-t);if(o<Number.EPSILON){r=e[a][1];break}o<n&&(n=o,r=e[a][1])}return e.filter((function(e){return e[1]===r}))}))}(S.map((function(e){return e[2]})),t[1]),a=[{label:o("pr-curve:threshold")},{label:o("pr-curve:precision")},{label:o("pr-curve:recall")},{label:o("pr-curve:true-positives")},{label:o("pr-curve:false-positives")},{label:o("pr-curve:true-negatives")},{label:o("pr-curve:false-negatives")}],i=r.reduce((function(e,t,r){return e.push.apply(e,Object(O.a)(new Array(t.length).fill(n[r]))),e}),[]),l=r.reduce((function(e,t){return e.push.apply(e,Object(O.a)(t.map((function(e){var t=Object(g.a)(e,7),n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],l=t[5],c=t[6];return[U(c),W(n),W(r),a,o,i,l]})))),e}),[]);return Object(T.renderToStaticMarkup)(D(x.a,{run:o("common:runs"),runs:i,columns:a,data:l}))}),[S,n,o]),R=Object(c.useMemo)((function(){return A(A({},p),{},{tooltip:A(A({},p.tooltip),{},{formatter:E})})}),[E]);return!_&&b?D(G,null,o("common:error")):D(K,null,D(F,{ref:i,title:r,options:R,data:_,loading:d,zoom:!0}),D(q,{items:[{icon:"maximize",activeIcon:"minimize",tooltip:o("pr-curve:maximize"),activeTooltip:o("pr-curve:minimize"),toggle:!0,onClick:C},{icon:"restore-size",tooltip:o("pr-curve:restore"),onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.restore()}},{icon:"download",tooltip:o("pr-curve:download-image"),onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.saveAsImage()}}]}))},X=n("1HTM"),Y=n("0KuU"),B=n("lXyp"),V=n("cBaE"),Z=u.a.createElement,$=Object(_.a)(".2f"),ee=R.c.div.withConfig({displayName:"StepSlider__TimeDisplay",componentId:"sc-1l9l1tf-0"})(["color:",";font-size:0.857142857em;padding-left:1.666666667em;margin-bottom:0.416666667em;"],b.O),te=R.c.span.withConfig({displayName:"StepSlider__Label",componentId:"sc-1l9l1tf-1"})(["display:inline-block;padding-left:1.428571429em;position:relative;"," &::before{content:'';display:block;"," background-color:",";border-radius:50%;position:absolute;left:0;top:50%;transform:translateY(-50%);}"],Object(b.r)(),Object(b.K)("0.857142857em","0.857142857em"),(function(e){return e.color})),ne=Object(R.c)(B.a).withConfig({displayName:"StepSlider__FullWidthRangeSlider",componentId:"sc-1l9l1tf-2"})(["width:100%;"]),re=(J={},Object(o.a)(J,s.a.WallTime,"wallTimes"),Object(o.a)(J,s.a.Relative,"relatives"),Object(o.a)(J,s.a.Step,"steps"),J),ae=(L={},Object(o.a)(L,s.a.WallTime,(function(e,t){var n=t.i18n;return Object(V.b)(e,n.language)})),Object(o.a)(L,s.a.Relative,(function(e){return"".concat($(e)," ms")})),Object(o.a)(L,s.a.Step,(function(e,t){var n=t.t;return"".concat(n("common:time-mode.step")," ").concat(e)})),L),oe=function(e){var t=e.onChange,n=e.run,r=e.type,a=Object(l.g)("common"),o=Object(c.useState)(n.index),i=o[0],u=o[1];return Object(c.useEffect)((function(){return u(n.index)}),[n.index]),Z(v.a,{label:Z(te,{color:n.colors[0],title:n.label},n.label)},Z(ee,null,null==n[re[r]][i]?"...":ae[r](n[re[r]][i],a)),Z(ne,{min:0,max:n.steps.length?n.steps.length-1:0,step:1,value:i,onChange:u,onChangeComplete:function(){return null===t||void 0===t?void 0:t(i)}}))},ie=n("DLPD"),le=n("C34g"),ce=n("t2fH"),ue=u.a.createElement;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=R.c.div.withConfig({displayName:"pr-curve__StepSliderWrapper",componentId:"dg200l-0"})(["max-height:30vh;overflow:auto;overflow-x:hidden;overflow-y:auto;flex-shrink:0;> ",":last-child{padding-bottom:",";margin-bottom:0;}+ .run-section{border-top:1px solid ",";margin-top:0;padding-top:",";}&:empty + .run-section{border-top:none;}"],d.a,Object(b.H)(20),b.g,Object(b.H)(20)),de=function(){var e=Object(l.g)(["pr-curve","common"]).t,t=Object(c.useState)(!0),n=t[0],p=t[1],b=Object(ce.a)("pr-curve",n),g=b.runs,O=b.tags,j=b.runsInTags,h=b.selectedRuns,y=b.onChangeRuns,w=b.loading,C=Object(c.useState)({}),S=C[0],x=C[1],P=Object(c.useCallback)((function(e,t){return x((function(n){return pe(pe({},n),{},Object(o.a)({},e,t))}))}),[]);Object(c.useEffect)((function(){return x((function(e){return j.reduce((function(t,n){return null!=e[n.label]&&(t[n.label]=e[n.label]),t}),{})}))}),[j]);var _=Object(I.b)(j.map((function(e){return"/pr-curve/steps?".concat(N.a.stringify({run:e.label}))})),!!n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.b)(t)})).data,E=Object(c.useMemo)((function(){return j.map((function(e,t){var n,r,a,o,i;return pe(pe({},e),{},{index:null!==(n=S[e.label])&&void 0!==n?n:(null!==(r=null===_||void 0===_?void 0:_[t].length)&&void 0!==r?r:1)-1,steps:null!==(a=null===_||void 0===_?void 0:_[t].map((function(e){return e[1]})))&&void 0!==a?a:[],wallTimes:null!==(o=null===_||void 0===_?void 0:_[t].map((function(e){return Math.floor(e[0])})))&&void 0!==o?o:[],relatives:null!==(i=null===_||void 0===_?void 0:_[t].map((function(e){return e[0]-_[t][0][0]})))&&void 0!==i?i:[]})}))}),[j,_,S]),T=Object(c.useState)(s.a.Step),R=T[0],H=T[1],z=Object(c.useMemo)((function(){return O.map((function(e){return pe(pe({},e),{},{runs:e.runs.map((function(e){return pe(pe({},e),{},{index:0,steps:[],wallTimes:[],relatives:[]},E.find((function(t){return t.label===e.label})))}))})}))}),[O,E]),D=Object(c.useMemo)((function(){return g.length?ue(Y.a,{runs:g,selectedRuns:h,onChangeRuns:y,running:n,onToggleRunning:p},ue(d.a,null,ue(v.a,{label:e("pr-curve:time-display-type")},ue(ie.a,{value:R,onChange:H}))),ue(be,null,E.map((function(e){return ue(d.a,{key:e.label},ue(oe,{run:e,type:R,onChange:function(t){return P(e.label,t)}}))})))):null}),[e,y,n,g,h,R,E,P]),M=Object(c.useCallback)((function(e){var t=e.label,o=e.runs,i=Object(a.a)(e,["label","runs"]);return ue(Q,Object(r.a)({runs:o,tag:t},i,{running:n}))}),[n]);return ue(u.a.Fragment,null,ue(X.a,{url:"/pr-curve/tags"}),ue(le.a,null,e("common:pr-curve")),ue(f.a,{aside:D,loading:w},w||g.length?ue(i.a,{items:z,withChart:M,loading:w}):ue(m.a,null)))};de.getInitialProps=function(){return{namespacesRequired:["pr-curve","common"]}};t.default=de},Y0CH:function(e,t,n){var r=n("LXxW"),a=n("eUgh"),o=n("711d"),i=n("UNi/"),l=n("3L66"),c=Math.max;e.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,(function(e){if(l(e))return t=c(e.length,t),!0})),i(t,(function(t){return a(e,o(t))}))}},iU75:function(e,t,n){"use strict";var r=n("ERkP"),a=n.n(r),o=n("r8eb"),i=n("j/s1"),l=a.a.createElement,c=i.c.div.withConfig({displayName:"TooltipTable__Wrapper",componentId:"s6ix3-0"})(["table{border-spacing:none;text-align:left;table-layout:fixed;font-size:",";th,td{margin:0;> span{display:inline-block;}}th{font-size:1.166666667em;font-weight:bold;padding:0 0.285714286em;&.run > span{min-width:4.285714286em;max-width:12.857142857em;}}td{padding:0 0.333333333em;&.run-indicator > span{"," border-radius:6px;vertical-align:middle;background-color:currentColor;}}}"],Object(o.H)(12),Object(o.K)(12,12));t.a=function(e){var t=e.run,n=e.runs,r=e.columns,a=e.data;return l(c,null,l("table",null,l("thead",null,l("tr",null,l("th",{className:"run-indicator"}),l("th",{className:"run"},t),r.map((function(e,t){var n;return l("th",{key:t},l("span",{style:{width:null!==(n=e.width)&&void 0!==n?n:"auto"}},e.label))})))),l("tbody",null,null===a||void 0===a?void 0:a.map((function(e,t){var r,a;return l("tr",{key:t},l("td",{className:"run-indicator"},l("span",{style:{color:null===(r=n[t])||void 0===r?void 0:r.colors[0]}})),l("td",{className:"run"},l("span",null,null===(a=n[t])||void 0===a?void 0:a.label)),e.map((function(e,t){return l("td",{key:t},l("span",null,e))})))})))))}},q5lv:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pr-curve",function(){return n("LSJS")}])},xrec:function(e,t,n){var r=n("EA7m")(n("Y0CH"));e.exports=r}},[["q5lv",1,2,3,4,0,5,7,6,8,9,10,12]]]);
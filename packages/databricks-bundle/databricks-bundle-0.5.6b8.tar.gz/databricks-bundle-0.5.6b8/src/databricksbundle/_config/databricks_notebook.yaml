parameters:
  databricksbundle:
    databricks:
      spark:
        extraConfig:

services:
  databricksbundle.dbutils.NotebookDbUtilsFactory:

  databricksbundle.dbutils.DbUtilsWrapper:
    factory: ['@databricksbundle.dbutils.NotebookDbUtilsFactory', 'create']

  databricksbundle.spark.config.databricksExtraConfig:
    class: databricksbundle.spark.config.DictConfigConfigurator
    arguments:
      - '%databricksbundle.databricks.spark.extraConfig%'
    tags:
      - databricks.configurator

  databricksbundle.spark.NotebookSessionFactory:
    arguments:
      - !tagged databricks.configurator

  pyspark.sql.session.SparkSession:
    factory: ['@databricksbundle.spark.NotebookSessionFactory', 'create']

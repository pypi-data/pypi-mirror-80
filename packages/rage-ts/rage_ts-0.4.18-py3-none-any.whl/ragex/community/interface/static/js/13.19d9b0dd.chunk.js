(this["webpackJsonpucess-talk-admin"]=this["webpackJsonpucess-talk-admin"]||[]).push([[13],{1003:function(e,t,a){"use strict";var n=a(0);t.a=function(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}},1102:function(e,t,a){},1293:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(20),l=a(0),c=a.n(l),s=a(7),i=a(174),o=a(38),d=a.n(o),u="[DASHBOARD APP] GET CONV LIST DATA",m="[DASHBOARD APP] GET CONV CHART1 DATA",f="[DASHBOARD APP] GET CONV CHART2 DATA",p="[DASHBOARD APP] GET STATISTICS",b="/api/conversations";function g(e,t){var a="";void 0!==t?a="offset=0&intent=&entity=&action=&policies=&exclude_self=true&"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"):a="offset=0&intent=&entity=&action=&policies=&exclude_self=true";var n=d.a.get(b+"?"+a);return function(t){return n.then(function(a){"firstView"===e?t({type:m,payload:a.data}):"secondView"===e&&t({type:f,payload:a.data})})}}var y=a(46),x=a(12);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v={statistics:null,conversations:null,conversationsChart:{firstView:null,secondView:null}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return E({},e,{statistics:t.payload});case u:return E({},e,{conversations:Object(x.a)(t.payload)});case m:return E({},e,{conversationsChart:E({},e.conversationsChart,{firstView:Object(x.a)(t.payload)})});case f:return E({},e,{conversationsChart:E({},e.conversationsChart,{secondView:Object(x.a)(t.payload)})});default:return e}},O=Object(y.d)({dashboard:h}),j=a(86),N=a.n(j),D=a(1003),Y=a(25),S=a(152),M=a(119);var C=c.a.memo(function(e){function t(e){return String(e).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}return c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"p-16 pr-4 flex flex-row items-center justify-between"},c.a.createElement(M.a,{className:"h3 font-bold"},"\uc804\uccb4 \uba54\uc2dc\uc9c0 \ud604\ud669")),c.a.createElement("div",{className:"text-center pt-12 pb-28"},c.a.createElement(M.a,{className:"text-48 leading-none text-blue"},t(e.widget.user_messages)+" / "+t(e.widget.bot_messages)),c.a.createElement(M.a,{className:"text-16",color:"textSecondary"},"\ucd1d \uc0ac\uc6a9\uc790 \uba54\uc2dc\uc9c0 \uac74\uc218 / \ucc57\ubd07 \uba54\uc2dc\uc9c0 \uac74\uc218")))}),A=a(305),k=a.n(A);var P=c.a.memo(function(e){var t=e.widget,a=k.a.sumBy(t,"n_user_messages");return c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"p-16 pr-4 flex flex-row items-center justify-between"},c.a.createElement(M.a,{className:"h3 font-bold"},"\uc0ac\uc6a9\uc790 \uba54\uc2dc\uc9c0 \ud604\ud669")),c.a.createElement("div",{className:"text-center pt-12 pb-28"},c.a.createElement(M.a,{className:"text-48 leading-none text-red"},String(a).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")),c.a.createElement(M.a,{className:"text-16",color:"textSecondary"},"\uc0ac\uc6a9\uc790 \uba54\uc2dc\uc9c0 \uac74\uc218")))});var T=c.a.memo(function(e){return c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"p-16 pr-4 flex flex-row items-center justify-between"},c.a.createElement(M.a,{className:"h3 font-bold"},"\ub300\ud654 \ud604\ud669")),c.a.createElement("div",{className:"text-center pt-12 pb-28"},c.a.createElement(M.a,{className:"text-48 leading-none text-orange"},(t=e.widget.length,String(t).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,"))),c.a.createElement(M.a,{className:"text-16",color:"textSecondary"},"\ucd1d \ub300\ud654 \uac74\uc218")));var t});var _=c.a.memo(function(e){var t=e.widget,a=0,n=0;function r(e){return String(e).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}return k.a.forEach(t,function(e,t){k.a.filter(e.actions,function(e){"action_default_fallback"===e&&a++,"action_help"===e&&n++})}),c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"p-16 pr-4 flex flex-row items-center justify-between"},c.a.createElement(M.a,{className:"h3 font-bold"},"\ub300\ud654 \uc0c1\uc138 \ud604\ud669")),c.a.createElement("div",{className:"text-center pt-12 pb-28"},c.a.createElement(M.a,{className:"text-48 leading-none text-green"},r(a)+" / "+r(n)),c.a.createElement(M.a,{className:"text-16",color:"textSecondary"},"fallback \ub300\ud654 \uac74\uc218 / \ub3c4\uc6c0\ub9d0 \ub300\ud654 \uac74\uc218")))}),B=a(892),H=a(290);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var I=c.a.memo(function(e){var t={},a={firstView:"\ucd5c\uadfc 10\uc77c\uac04 \ud604\ud669",secondView:"\ucd5c\uadfc 1\uac1c\uc6d4\uac04 \ud604\ud669"},s=Object(l.useState)("firstView"),i=Object(r.a)(s,2),o=i[0],d=i[1];function u(e){d(e)}function m(e){return String(e).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}var f={},p=[],b=0,g=0,y=0,x=0;if(null!==e.widget){k.a.forEach(e.widget[o],function(e,t){b=0,g=0,y=0,x=0;var a=N.a.unix(e.latest_event_time).format("YYYY-MM-DD");k.a.filter(e.actions,function(e){"action_default_fallback"===e&&(g=1),"action_help"===e&&(y=1)}),b=1,x=e.n_user_messages,p.push({dateString:a,userMessageCnt:x,totalCnt:b,fallbackCnt:g,helpCnt:y})});var w=k()(p).groupBy("dateString").map(function(e,t){return{dateString:t,userMessageCnt:m(k.a.sumBy(e,"userMessageCnt")),totalCnt:m(k.a.sumBy(e,"totalCnt")),fallbackCnt:m(k.a.sumBy(e,"fallbackCnt")),helpCnt:m(k.a.sumBy(e,"helpCnt"))}}).value(),E=k.a.orderBy(w,["dateString"],["asc"]);t={responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom"},tooltips:{mode:"label"},scales:{xAxes:[{stacked:!0,display:!0,gridLines:{display:!0},labels:null!==(f=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},f,Object(n.a)({},o,{labels:k.a.map(E,"dateString"),datasets:[{type:"line",label:"\uc0ac\uc6a9\uc790 \uba54\uc2dc\uc9c0 \uac74\uc218",data:k.a.map(E,"userMessageCnt"),backgroundColor:"#ffd43b",borderColor:"#ffd43b",fill:!1,yAxisID:"y-axis-2"},{type:"bar",label:"\ucd1d \ub300\ud654 \uac74\uc218",data:k.a.map(E,"totalCnt"),backgroundColor:"#0b7285",hoverBackgroundColor:"#0c8599",yAxisID:"y-axis-1"},{type:"bar",label:"fallback \ub300\ud654 \uac74\uc218",data:k.a.map(E,"fallbackCnt"),backgroundColor:"#15aabf",hoverBackgroundColor:"#22b8cf",yAxisID:"y-axis-1"},{type:"bar",label:"\ub3c4\uc6c0\ub9d0 \ub300\ud654 \uac74\uc218",data:k.a.map(E,"helpCnt"),backgroundColor:"#66d9e8",hoverBackgroundColor:"#99e9f2",yAxisID:"y-axis-1"}]})))[o]?f[o].labels:[],categoryPercentage:1}],yAxes:[{id:"y-axis-1",stacked:!0,type:"linear",display:!0,position:"left",gridLines:{display:!0},labels:{show:!0}},{id:"y-axis-2",stacked:!0,type:"linear",display:!0,position:"right",gridLines:{display:!0},labels:{show:!0}}]}}}return null===e.widget||null===e.widget[o]||0===e.widget[o].length?c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"flex items-center justify-between px-16 py-16 border-b-1"},c.a.createElement(M.a,{className:"h3 font-bold"},"\uc77c\ubcc4 \uba54\uc2dc\uc9c0 \ubc0f \ub300\ud654 \ud604\ud669"),c.a.createElement("div",{className:"items-center"},Object.entries(a).map(function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return c.a.createElement(B.a,{key:a,className:"normal-case shadow-none px-16",onClick:function(){return u(a)},color:o===a?"secondary":"default",variant:o===a?"contained":"text"},n)}))),c.a.createElement("div",{className:"flex flex-row flex-wrap"},c.a.createElement("div",{className:"w-full p-8 min-h-420 h-420",style:{minHeight:"306px"}},c.a.createElement(M.a,{className:"text-center text-white text-13",style:{paddingTop:"130px"}},"\uc870\ud68c\ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")))):c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"flex items-center justify-between px-16 py-16 border-b-1"},c.a.createElement(M.a,{className:"h3 font-bold"},"\uc77c\ubcc4 \uba54\uc2dc\uc9c0 \ubc0f \ub300\ud654 \ud604\ud669 ( "+f[o].labels[0]+" ~ "+f[o].labels[f[o].labels.length-1]+" )"),c.a.createElement("div",{className:"items-center"},Object.entries(a).map(function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return c.a.createElement(B.a,{key:a,className:"normal-case shadow-none px-16",onClick:function(){return u(a)},color:o===a?"secondary":"default",variant:o===a?"contained":"text"},n)}))),c.a.createElement("div",{className:"flex flex-row flex-wrap"},c.a.createElement("div",{className:"w-full p-8 min-h-420 h-420"},c.a.createElement(H.a,{data:{labels:f[o].labels,datasets:f[o].datasets},width:800,height:290,options:t}))))});var R=c.a.memo(function(e){var t=e.widget,a=[];k.a.forEach(t,function(e){k.a.forEach(e.intents,function(e){"get_started"!==e&&"\ud658\uc601\uc778\uc0ac"!==e&&"\uc791\ubcc4\uc778\uc0ac"!==e&&a.push({intent:e})})});var n=k.a.map(k.a.countBy(a,"intent"),function(e,t){return{intent:t,cnt:e}}),r=k.a.orderBy(n,["cnt"],["desc"]);return r=r.filter(function(e,t){return t>=0&&t<=4}),c.a.createElement(S.a,{className:"w-full rounded-8 shadow-none border-1"},c.a.createElement("div",{className:"p-16 pr-4 flex flex-row items-center justify-between"},c.a.createElement(M.a,{className:"h3 font-bold"},"\uc778\ud150\ud2b8 \uc0c1\uc704 Top 5")),c.a.createElement("table",{className:"simple"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},"\uc778\ud150\ud2b8"),c.a.createElement("th",{className:"text-center"},"\ub300\ud654 \uac74\uc218"))),c.a.createElement("tbody",null,r&&0===r.length&&c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"2"},c.a.createElement(M.a,{className:"text-center text-white text-13"},"\uc870\ud68c\ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."))),r.map(function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",{className:0===t?"text-red-400 font-bold text-13":1===t?"text-blue-400 font-bold text-13":2===t?"text-green-400 font-bold text-13":"text-white text-13",title:e.intent},(n=e.intent,""!==(r=16)&&null!=r||(r=20),""!==(l="...")&&null!=l||(l="..."),n.length>r&&(n=n.substr(0,r)+l),n)),c.a.createElement("td",{className:0===t?"text-red-400 font-bold text-13 text-right":1===t?"text-blue-400 font-bold text-13 text-right":2===t?"text-green-400 font-bold text-13 text-right":"text-white text-13 text-right"},(a=e.cnt,String(a).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")+"\uac74")));var a,n,r,l}))))}),L=(a(1102),a(884)),$=a(895),F=a(461),G=a(896),J=a(1105),U=a.n(J),K=a(999),q=a(1104),z=a.n(q),Q=a(1230),W=a(870),X=a(1288),Z=a(1231);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var te=Object(K.a)(function(e){return{content:{"& canvas":{maxHeight:"100%"}}}});t.default=Object(i.a)("dashboardApp",O)(function(e){var t=Object(s.b)(),a=Object(s.c)(function(e){return e.dashboardApp.dashboard.conversations}),i=Object(s.c)(function(e){return e.dashboardApp.dashboard.conversationsChart}),o=Object(s.c)(function(e){return e.dashboardApp.dashboard.statistics}),m=te(e),f=Object(l.useRef)(null),y=Object(l.useState)({dateString:N()().format(N.a.HTML5_FMT.DATE),start:N()(N()().format(N.a.HTML5_FMT.DATE),"YYYY.MM.DD").unix(),until:N()(N()().add(1,"day").format("YYYY.MM.DD"),"YYYY.MM.DD").unix()}),x=Object(r.a)(y,2),w=x[0],E=x[1],v=Object(l.useState)(N()().format("YYYY-MM-DD HH:mm:ss")),h=Object(r.a)(v,2),O=h[0],j=h[1];Object(l.useEffect)(function(){S(w)},[]),Object(D.a)(function(){S(w)},3e5);var S=function(e){if(void 0!==e){t(function(){var e=d.a.get("/api/statistics");return function(t){return e.then(function(e){return t({type:p,payload:e.data})})}}()),t(function(e){var t="";t=void 0!==e?"offset=0&intent=&entity=&action=&policies=&exclude_self=true&"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&"):"offset=0&intent=&entity=&action=&policies=&exclude_self=true";var a=d.a.get(b+"?"+t);return function(e){return a.then(function(t){e({type:u,payload:t.data})})}}({start:e.start,until:e.until}));var a=N()(e.dateString).subtract(10,"day").format("YYYY-MM-DD"),n=N()(a,"YYYY.MM.DD").unix();t(g("firstView",{start:n,until:e.until}));var r=N()(e.dateString).subtract(1,"month").format("YYYY-MM-DD"),l=N()(r,"YYYY.MM.DD").unix();t(g("secondView",{start:l,until:e.until})),j(N()().format("YYYY-MM-DD HH:mm:ss"))}};return a&&o?c.a.createElement(Y.o,{classes:{header:"min-h-130 h-130",content:m.content},header:c.a.createElement("div",{className:"flex flex-col justify-between flex-1 px-24"},c.a.createElement("div",{className:"flex items-center flex-1"},c.a.createElement(Y.c,{animation:"transition.expandIn",delay:300},c.a.createElement(L.a,{className:"text-32 mr-16"},"insert_chart_outlined")),c.a.createElement(Y.c,{animation:"transition.slideLeftIn",delay:300},c.a.createElement("span",{className:"text-24"},"Dashboard"))),c.a.createElement("div",{className:"flex justify-between items-end"},c.a.createElement($.a,{lgUp:!0},c.a.createElement(F.a,{"aria-label":"open left sidebar"},c.a.createElement(L.a,null,"menu"))))),content:c.a.createElement("div",{className:"p-12"},c.a.createElement("div",{className:"widget flex w-full p-12"},c.a.createElement("div",{className:"flex items-center justify-between"},c.a.createElement(W.a,{utils:Q.a,locale:Z.a},c.a.createElement(X.a,{style:{width:"186px"},autoOk:!0,disableFuture:!0,variant:"inline",color:"secondary",inputVariant:"outlined",format:"yyyy-MM-dd",margin:"normal",id:"date-picker-inline",label:"\uc870\ud68c\uc77c\uc790",value:w.dateString,onChange:function(e){var t=N()(e,"YYYY.MM.DD").unix();console.log("unixTimestamp : ",t);var a=N()(e).add(1,"day").format("YYYY.MM.DD");E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},w,{dateString:N()(e).format(N.a.HTML5_FMT.DATE),start:t,until:N()(a,"YYYY.MM.DD").unix()})),S({dateString:N()(e).format(N.a.HTML5_FMT.DATE),start:t,until:N()(a,"YYYY.MM.DD").unix()})},KeyboardButtonProps:{"aria-label":"change date",style:{padding:0}},InputAdornmentProps:{position:"start"}})),c.a.createElement(M.a,{variant:"subtitle2",className:"pl-5 py-0 sm:py-24"},"\uc870\ud68c\uc2dc\uac04 : ",O,c.a.createElement(B.a,{variant:"contained",color:"secondary",className:m.button,startIcon:c.a.createElement(z.a,null),style:{marginLeft:"12px"},onClick:function(){return S(w)}},"\uc870\ud68c")),c.a.createElement(G.a,{variant:"outlined",color:"secondary",label:"\ub370\uc774\ud130\ub294 5\ubd84\ub9c8\ub2e4 \uc790\ub3d9 \uac31\uc2e0 \ub429\ub2c8\ub2e4.",icon:c.a.createElement(U.a,null),className:"ml-12"}))),c.a.createElement(Y.d,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}},c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},c.a.createElement(C,{toggleRightSidebar:function(e){return f.current.toggleRightSidebar()},widget:o})),c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},c.a.createElement(P,{widget:a,date:w.dateString})),c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},c.a.createElement(T,{widget:a,date:w.dateString})),c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},c.a.createElement(_,{widget:a,date:w.dateString})),c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-3/4 p-12"},c.a.createElement(I,{widget:i,date:w.dateString})),c.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},c.a.createElement(R,{widget:a,date:w.dateString})))),ref:f}):null})}}]);